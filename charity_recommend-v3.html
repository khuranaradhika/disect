<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Charities</title>
</head>
<body>
  <h1>User Preferences</h1>
  <form id="user">
    <p>Select cause(s):</p>
    <label><input type="checkbox" name="user" value="Labor/Worker's Rights">Labor/Worker's Rights</label><br>
    <label><input type="checkbox" name="user" value="Carbon Emissions">Carbon Emissions</label><br>
    <label><input type="checkbox" name="user" value="Environmentally-Friendly">Environmentally-Friendly</label><br>
    <label><input type="checkbox" name="user" value="Animal Cruelty/Vegan">Animal Cruelty/Vegan</label><br>
    <label><input type="checkbox" name="user" value="LGBTQ">LGBTQ</label><br>
    <label><input type="checkbox" name="user" value="Black Women / Black-owned">Black Women / Black-owned</label><br>
    <label><input type="checkbox" name="user" value="Fashion Sustainability Support">Fashion Sustainability Support</label><br>
    <label><input type="checkbox" name="user" value="Made in USA">Made in USA</label><br>
    <br>
  </form>

  <h1>Select a brand:</h1>
  <form id="brands">
    <input type="radio" id="adidas" name="brand" value="Adidas">
    <label for="adidas">Adidas</label><br>
    <input type="radio" id="amazon" name="brand" value="Amazon">
    <label for="amazon">Amazon</label><br>
    <input type="radio" id="dicks" name="brand" value="Dick's">
    <label for="dicks">Dick's</label><br>
    <input type="radio" id="gap" name="brand" value="Gap Inc.">
    <label for="gap">Gap Inc.</label><br>
    <input type="radio" id="hm" name="brand" value="H&M Group">
    <label for="hm">H&M Group</label><br>
    <input type="radio" id="lululemon" name="brand" value="Lululemon">
    <label for="lululemon">Lululemon</label><br>
    <input type="radio" id="nike" name="brand" value="Nike">
    <label for="nike">Nike</label><br>
    <input type="radio" id="nordstrom" name="brand" value="Nordstrom">
    <label for="nordstrom">Nordstrom</label><br>
    <input type="radio" id="patagonia" name="brand" value="Patagonia">
    <label for="patagonia">Patagonia</label><br>
    <input type="radio" id="under_armour" name="brand" value="Under Armour">
    <label for="under_armour">Under Armour</label><br>
    <input type="button" value="Display causes for select brand" onclick="displayCharities()">
  </form>

  <!-- <div id="overlap-output"></div> -->
  <div id="charity-output"></div>
  
  <script>
    // Define the dictionaries
    const adidas_dict = {"Adidas": ["Labor/Worker's Rights", "Environmentally-Friendly", "Fashion sustainability support"]};
    const amazon_dict = {"Amazon": ["Labor/Worker's Rights", "Made in USA", "Black Women / Black-owned"]};
    const dicks_dict = {"Dick's": ["Labor/Worker's Rights", "Carbon Emissions"]};
    const gap_dict = {"Gap Inc.": ["Labor/Worker's Rights", "Environmentally-Friendly", "Black Women / Black-owned"]};
    const hm_dict = {"H&M Group": ["Labor/Worker's Rights", "Environmentally-Friendly", "Fashion sustainability support"]};
    const lululemon_dict = {"Lululemon": ["Labor/Worker's Rights", "Environmentally-Friendly", "LGBTQ"]};
    const nike_dict = {"Nike": ["Labor/Worker's Rights", "Environmentally-Friendly", "Black Women / Black-owned"]};
    const nordstrom_dict = {"Nordstrom": ["Labor/Worker's Rights", "Environmentally-Friendly", "Black Women / Black-owned"]};
    const patagonia_dict = {"Patagonia": ["Environmentally-Friendly", "Labor/Worker's Rights", "Made in USA"]};
    const under_armour_dict = {"Under Armour": ["Labor/Worker's Rights", "Environmentally-Friendly", "Black Women / Black-owned"]};

    // Combine the dictionaries into a single dictionary
    const brands_dict = {};
    Object.assign(brands_dict, adidas_dict, amazon_dict, dicks_dict, gap_dict, hm_dict, lululemon_dict, nike_dict, nordstrom_dict, patagonia_dict, under_armour_dict);

    const charityDict = {
      "Labor/Worker's Rights": [
        ["Clean Clothes Campaign", "https://cleanclothes.org/", "https://cleanclothes.org/donate", "Fights for better working conditions in the global garment industry."],
        ["International Labor Rights Forum", "https://laborrights.org/", "https://laborrights.app.neoncrm.com/np/clients/laborrights/donation.jsp", "Advocates for labor rights around the world."],
        ["Workers Rights Consortium", "https://www.workersrights.org/", "https://www.workersrights.org/donate/", "The Workers Rights Consortium is a non-profit organization that works to improve working conditions and protect the rights of workers who make apparel and other products sold in the United States. The organization conducts independent investigations of factories and other workplaces to ensure that workers are treated fairly and with dignity. The Workers Rights Consortium also works to promote transparency in supply chains, so that consumers can make informed choices about the products they purchase."],
        ["Labour Behind the Label", "https://labourbehindthelabel.org/", "https://labourbehindthelabel.org/donate/", "Campaigns for garment workers' rights worldwide."],
        ["Maquila Solidarity Network", "https://www.maquilasolidarity.org/en", "https://www.maquilasolidarity.org/en/civicrm/contribute/transact?reset=1&id=1", "Works with partners to improve conditions for workers in global supply chains."],
        ["Freedom United", "https://www.freedomunited.org/", "https://www.freedomunited.org/donate/", "Fights modern slavery and human trafficking."]
      ],
      "Carbon Emissions": [
        ["Clean Air Task Force", "https://www.catf.us/", "https://donate.catf.us/page/39127/donate/1", "Advocates for clean air and climate action through policy and technology solutions."],
        ["Carbon180", "https://carbon180.org/", "https://carbon180.org/donate", "Aims to reduce carbon emissions through carbon removal solutions."],
        ["Evergreen Action", "https://www.evergreenaction.com/", "https://secure.actblue.com/donate/evergreenaction?refcode=alertbar", "Advocates for climate action policies at the national level."]
      ],
      "Environmentally-Friendly": [
        ["The Nature Conservancy", "https://www.nature.org/en-us/", "https://preserve.nature.org/page/80429/donate/1", "Works to protect lands and waters around the world."],
        ["WellDone Foundation", "https://welldonefoundation.org/", "https://welldonefoundation.org/donate-to-wdf/", "Provides access to safe water and sanitation in developing countries."],
        ["The Climate Foundation", "https://www.climatefoundation.org/", "https://www.climatefoundation.org/donate-2023.html", "Develops solutions to combat climate change."],
        ["Evergreen Action", "https://www.evergreenaction.com/", "https://secure.actblue.com/donate/evergreenaction?refcode=alertbar", "Advocates for climate action policies at the national level."]
      ],
      "Animal Cruelty/Vegan": [
        ["Cruelty Free International", "https://crueltyfreeinternational.org/", "https://crueltyfreeinternational.org/donate", "Campaigns to end animal testing worldwide."],
        ["Center for Alternatives to Animal Testing", "https://caat.jhsph.edu/", "https://caat.jhsph.edu/giving/index.html", "Develops and promotes alternatives to animal testing."]
      ],
      "LGBTQ": [
        ["The Trevor Project", "https://www.thetrevorproject.org/", "https://www.thetrevorproject.org/", "Provides crisis intervention and suicide prevention services to LGBTQ+ youth."],
        ["Human Rights Campaign", "https://www.hrc.org/", "https://give.hrc.org/page/118560/donate/1?ea.tracking.id=or_gnr_hrc_homepage2022", "Advocates for LGBTQ+ rights and equality."],
        ["Point Foundation", "https://pointfoundation.org/", "https://pointfoundation.org/support/donate", "Provides scholarships and support to LGBTQ+ students."],
        ["Boston Alliance of Gay, Lesbian, Bisexual, Transgender Youth", "https://www.bagly.org/", "https://www.bagly.org/donate", "Provides direct support to LGBTQ+ youth during the COVID-19 pandemic."],
        ["Campaign for Southern Equality", "https://southernequality.org/", "https://southernequality.org/donate/", "Advocates for LGBTQ+ equality in the southern United States."],
        ["The Dru Project", "https://thedruproject.org/", "https://thedruproject.app.neoncrm.com/np/clients/thedruproject/donation.jsp?campaign=7", "The Dru Project is a non-profit organization that works to promote and support LGBTQ+ youth through scholarships, education, and advocacy. The organization is named after Drew Leinonen, who was one of the victims of the Pulse nightclub shooting in Orlando, Florida. The Dru Project aims to honor Drew's memory by continuing his work of supporting and empowering LGBTQ+ youth."],
        ["GLITS", "https://www.glitsinc.org/", "https://www.glitsinc.org/checkout/donate?donatePageId=609aa70f7ded3d2e926", "GLITS is a grassroots organization supporting the transgender community."]
      ],
      "Black Women / Black-owned": [
        ["Black Girl Collective", "https://wearebgc.org/", "https://wearebgc.org/donate/", "Black Girl Collective is a community-driven organization that empowers Black women and girls."],
        ["Black Connect", "https://www.blackconnect.org/", "https://www.blackconnect.org/donate", "Black Connect is a national non-profit organization supporting Black-owned businesses and entrepreneurs."]
      ],
      "Fashion sustainability support": [
        ["Fashion Revolution", "https://www.fashionrevolution.org/", "https://www.fashionrevolution.org/donate/", "Fashion Revolution is a global movement advocating for a more sustainable fashion industry."]
      ],
      "Made in USA": [
        ["Made in America", "https://madeinamerica.org/", "https://madeinamerica.org/donate-today/", "Made in America is a non-profit organization promoting American-made products and jobs."]
      ]
    };


    //returns overlap of selected brands causes with users preferences causes
    //otherwise returns brands causes
    function compareCheckboxArray() {
      const causeCheckboxes = document.getElementsByName('user');
      const causeChecked = Array.from(causeCheckboxes).filter(checkbox => checkbox.checked);

      const selectedBrand = document.querySelector('input[name="brand"]:checked').value;
      const brandCauses = brands_dict[selectedBrand];

      const overlap = brandCauses.filter(brandCause => {
        return causeChecked.some(causeBox => causeBox.value === brandCause);
      });
      return overlap.length > 0 ? overlap : brandCauses;
    //   const x = overlap.length > 0 ? overlap : brandCauses;
    //   console.log(x);
    }

    //gets charities for an inputted cause
    function getCharities(cause) {
        let charities = charityDict[cause];
        if (charities.length <= 3) {
            return charities;
        } else {
            let uniqueCharities = new Set();
            while (uniqueCharities.size < 3) {
            let randomCharity = charities[Math.floor(Math.random() * charities.length)];
            uniqueCharities.add(randomCharity);
            }
            return Array.from(uniqueCharities);
        }
    }

    //displays charities for the resulting list of causes
    function displayCharities() {
      let selectedCauses = compareCheckboxArray();
      let outputDiv = document.getElementById("charity-output");
      outputDiv.innerHTML = "";
      for (let j = 0; j < selectedCauses.length; j++) {
        let selectedCause = selectedCauses[j];
        let charities = getCharities(selectedCause);
        outputDiv.innerHTML += "<h2>" + selectedCause + "</h2>";
        for (let k = 0; k < charities.length; k++) {
          let charity = charities[k];
          outputDiv.innerHTML += "<h3>" + charity[0] + "</h3>";
          outputDiv.innerHTML += "<p><a href='" + charity[1] + "'>Visit Website</a></p>";
          outputDiv.innerHTML += "<p><a href='" + charity[2] + "'>Donate</a></p>";
          outputDiv.innerHTML += "<p>" + charity[3] + "</p>";
        }
      }
    }


  </script>
</body>
</html>